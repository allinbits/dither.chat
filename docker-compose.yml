services:
    # ================================
    # Database Services
    # ================================
    mongodb-indexer-feed:
        container_name: "mongodb-indexer-feed"
        image: mongo:8.0.3
        restart: always
        ports:
            - '27099:27017'
        environment:
            MONGO_INITDB_ROOT_USERNAME: username
            MONGO_INITDB_ROOT_PASSWORD: password

    mongodb-indexer-users:
        container_name: "mongodb-indexer-users"
        image: mongo:8.0.3
        restart: always
        ports:
            - '27098:27017'
        environment:
            MONGO_INITDB_ROOT_USERNAME: username
            MONGO_INITDB_ROOT_PASSWORD: password

    mongodb-indexer-likes:
        container_name: "mongodb-indexer-likes"
        image: mongo:8.0.3
        restart: always
        ports:
            - '27097:27017'
        environment:
            MONGO_INITDB_ROOT_USERNAME: username
            MONGO_INITDB_ROOT_PASSWORD: password

    mongodb-indexer-search:
        container_name: "mongodb-indexer-search"
        image: mongo:8.0.3
        restart: always
        ports:
            - '27096:27017'
        environment:
            MONGO_INITDB_ROOT_USERNAME: username
            MONGO_INITDB_ROOT_PASSWORD: password

    # ================================
    # Indexer Services
    # ================================
    indexer-feed:
        container_name: "indexer-feed"
        build: ./packages/indexer-feed
        restart: always
        command: ['pnpm', 'start']
        depends_on:
            - mongodb-indexer-feed
        environment:
            API_URLS: 'https://atomone-api.allinbits.com,https://atomone-rest.publicnode.com'
            START_BLOCK: '2605764'
            BATCH_SIZE: 50
            MONGO_URI: mongodb://username:password@mongodb-indexer-feed:27017/
            MEMO_PREFIX: "dither.Post,dither.Reply"
            RECEIVER: "atone1uq6zjslvsa29cy6uu75y8txnl52mw06j6fzlep"
            # LOG: process.env.LOG === 'true' ? true : false,

    indexer-likes:
        container_name: "indexer-likes"
        build: ./packages/indexer-likes
        restart: always
        command: ['pnpm', 'start']
        depends_on:
            - mongodb-indexer-likes
        environment:
            API_URLS: 'https://atomone-api.allinbits.com,https://atomone-rest.publicnode.com'
            START_BLOCK: '2605764'
            BATCH_SIZE: 50
            MONGO_URI: mongodb://username:password@mongodb-indexer-likes:27017/
            MEMO_PREFIX: "dither.Vote"
            RECEIVER: "atone1uq6zjslvsa29cy6uu75y8txnl52mw06j6fzlep"
            # LOG: process.env.LOG === 'true' ? true : false,

    indexer-users:
        container_name: "indexer-users"
        build: ./packages/indexer-users
        restart: always
        command: ['pnpm', 'start']
        depends_on:
            - mongodb-indexer-users
        environment:
            API_URLS: 'https://atomone-api.allinbits.com,https://atomone-rest.publicnode.com'
            START_BLOCK: '2605764'
            BATCH_SIZE: 50
            MONGO_URI: mongodb://username:password@mongodb-indexer-users:27017/
            MEMO_PREFIX: "dither.User."
            RECEIVER: "atone1uq6zjslvsa29cy6uu75y8txnl52mw06j6fzlep"
            # LOG: process.env.LOG === 'true' ? true : false,

    indexer-search:
        container_name: "indexer-search"
        build: ./packages/indexer-search
        restart: always
        command: ['pnpm', 'start']
        depends_on:
            - mongodb-indexer-search
        environment:
            API_URLS: 'https://atomone-api.allinbits.com,https://atomone-rest.publicnode.com'
            START_BLOCK: '2605764'
            BATCH_SIZE: 50
            MONGO_URI: mongodb://username:password@mongodb-indexer-search:27017/
            MEMO_PREFIX: "dither."
            RECEIVER: "atone1uq6zjslvsa29cy6uu75y8txnl52mw06j6fzlep"
            # LOG: process.env.LOG === 'true' ? true : false,

    # ================================
    # REST Services
    # ================================
